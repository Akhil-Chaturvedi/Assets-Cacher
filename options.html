<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Assets Cacher - Dashboard</title>
    <link rel="stylesheet" href="popup.css">
    <style>
        body {
            width: auto;
            max-width: 720px;
            margin: 3em auto;
            background: #fafafa;
        }

        .header {
            text-align: center;
            margin-bottom: 2.5em;
        }

        .header h1 {
            color: #1a1a1a;
            font-size: 1.8em;
            margin: 0;
            font-weight: 700;
        }

        .header p {
            color: #666;
            margin-top: 8px;
            font-size: 14px;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1.2em;
            margin-bottom: 2em;
        }

        .stat-card {
            background: #fff;
            border: 1px solid #e0e0e0;
            padding: 1.5em;
            border-radius: 8px;
            text-align: center;
        }

        .stat-card .value {
            font-size: 2em;
            font-weight: 700;
            display: block;
            color: #1a1a1a;
            margin-bottom: 4px;
        }

        .stat-card .label {
            font-size: 0.8em;
            color: #888;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            font-weight: 600;
        }

        .stat-card.green .value {
            color: #2e7d32;
        }

        .stat-card.blue .value {
            color: #1565c0;
        }

        .stat-card.neutral .value {
            color: #424242;
        }

        .section {
            padding: 1.5em;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            background: #fff;
        }

        .section h2 {
            margin: 0 0 0.5em 0;
            font-size: 1em;
            color: #1a1a1a;
        }

        .info-box {
            background: #f5f5f5;
            border-left: 3px solid #9e9e9e;
            padding: 12px 16px;
            margin: 1.5em 0;
            color: #555;
            font-size: 13px;
            line-height: 1.6;
        }

        #purge-all-button {
            background-color: #fff;
            color: #c62828;
            border: 1px solid #e0e0e0;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
            font-size: 13px;
            transition: all 0.2s;
        }

        #purge-all-button:hover {
            background-color: #fafafa;
            border-color: #c62828;
        }
    </style>
</head>

<body>
    <div class="container">

        <div class="header">
            <h1>Cache Monitor</h1>
            <p>Bandwidth saved by assets this extension forced into cache. Resets when the browser closes.</p>
        </div>

        <div class="stats-grid">
            <div class="stat-card green">
                <span class="value" id="global-savings">--</span>
                <span class="label">Bandwidth Saved</span>
            </div>
            <div class="stat-card blue">
                <span class="value" id="global-items">--</span>
                <span class="label">Session Cache Hits</span>
            </div>
            <div class="stat-card neutral">
                <span class="value" id="global-size">--</span>
                <span class="label">Data Served Locally</span>
            </div>
        </div>

        <div class="info-box">
            <strong>How metrics are counted:</strong> When the extension overrides a response
            (<code>Cache-Control: public, max-age=31536000</code>), it also injects
            <code>X-Assets-Cacher-Forced: true</code>. On the initial download, the exact
            <code>Content-Length</code> is recorded in session memory against that URL.
            (If the server obscures the file size via chunked-transfer encoding, a logical
            estimation is applied based on the file extension e.g., 50KB for scripts).
            On subsequent cache hits, the stored size is credited as bandwidth saved.
            Only assets this extension fingerprinted are counted â€” native browser cache hits
            for assets with already-correct server headers are not included.
        </div>

        <div class="section">
            <h2>Reset Statistics</h2>
            <p style="color: #666; font-size: 13px; margin: 0.5em 0 1em 0;">
                Resets the bandwidth counter to zero. Does not affect Chrome's disk cache.
            </p>
            <button id="purge-all-button">Reset Dashboard</button>
        </div>

    </div>

    <script src="options.js"></script>
</body>

</html>